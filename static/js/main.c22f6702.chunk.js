(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(10),s=a.n(c),o=a(2),i="LOAD_NOTES_FROM_FETCH",u="ADD_NOTE",l="notes",b=a(7),d=a(3),j=a(5),p=function(e){return Math.max.apply(Math,Object(b.a)(e))+1},O=function(e,t){var a=function(e){return e.split(":")};return e.slice(0).sort((function(e,n){var r=new Date(t[e].pubDate),c=new Date(t[n].pubDate),s=a(t[e].pubTime),i=Object(o.a)(s,2),u=i[0],l=i[1],b=a(t[n].pubTime),d=Object(o.a)(b,2),j=d[0],p=d[1];return r.setHours(u),r.setMinutes(l),c.setHours(j),c.setMinutes(p),r-c})).map((function(e){return+e}))},f=function(){return(Object({NODE_ENV:"production",PUBLIC_URL:"/notes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||!1).NODE_ENV},h=(!f()||f(),function(){var e;(e=console).error.apply(e,arguments)}),m=function(){return localStorage.getItem(l)},v=function(e){try{localStorage.setItem(l,e)}catch(t){h(t)}},x=function(){var e=m();return e?JSON.parse(e):{}},N=function(e){var t=x();v(JSON.stringify(Object(d.a)(Object(d.a)({},t),e)))},S=x(),C={orderedNotesIds:Object.keys(S).length?O(Object.keys(S),S):[],notesById:S},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var a=p(e.orderedNotesIds),n=Object(j.a)({},a,Object.assign({},t.payload.objNote,{id:a}));return N(n),Object(d.a)(Object(d.a)({},e),{},{notesById:Object.assign({},e.notesById,n),orderedNotesIds:[].concat(Object(b.a)(e.orderedNotesIds),[a])});case i:var r=(t.payload.aNotes||[]).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},t.id,Object.assign({},t)))}),e.notesById);return Object(d.a)(Object(d.a)({},e),{},{notesById:r,orderedNotesIds:O(Object.keys(r),r)});default:return h("Error - Unexpected action"),e}},g=a(9),E=a.n(g),T=a(11);function w(){return(w=Object(T.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Error while fetching the request "+t.toString());case 5:return e.prev=5,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(5),new Error("Error with the response from the request "+t.toString());case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}a(17);var D=a(0),I=function(e){var t=e.extraClassNamesSpaceSeparated,a=e.required,n=e.placeholderTxt,r=e.onChangeCb,c=e.value,s=void 0===c?"":c;return Object(D.jsx)("textarea",{className:"input-area "+(t||""),value:s,placeholder:n,"aria-placeholder":n,"aria-multiline":"true",role:"textbox",required:a?"required":"",onChange:r})},k=(a(19),function(e){var t=e.extraClassNamesSpaceSeparated,a=e.onClickCb,n=e.disabled,r=void 0!==n&&n,c=e.children;return Object(D.jsx)("button",{className:"btn "+(t||""),onClick:a,role:"button",disabled:r?"disabled":"",children:c})}),R=(a(20),function(e){var t=e.addNoteCb,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],s=r[1],i=Object(n.useCallback)((function(e){s(e.target.value||"")}),[s]),u=Object(n.useCallback)((function(e){var a="string"===typeof e?e:c;if(a){var n=(new Date).toLocaleString().match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\D*(\d{1,2}):(\d{1,2})/),r={name:"You",photoUrl:"https://picsum.photos/id/%ID%/40/40".replace("%ID%",669),content:a,pubDate:n?"".concat(n[2],"/").concat(n[1],"/").concat(n[3]):"",pubTime:n?"".concat(n[4],":").concat(n[5]):""};t(r),s("")}}),[c,t,s]),l=function(e){var t=Object(n.useRef)(),a=Object(n.useCallback)((function(t){"Enter"===t.key&&(t.preventDefault(),e(t.target.value))}),[]);return Object(n.useEffect)((function(){t.current.addEventListener("keydown",a);var e=t.current;return function(){e.removeEventListener("keydown",a)}}),[]),t}(u);return Object(D.jsxs)("section",{className:"insert",ref:l,children:[Object(D.jsx)(I,{extraClassNamesSpaceSeparated:"insert-input",placeholderTxt:"Enter note about the process",required:!0,onChangeCb:i,value:c}),Object(D.jsx)("div",{className:"insert-btn-container",children:Object(D.jsx)(k,{extraClassNamesSpaceSeparated:"insert-btn",onClickCb:u,disabled:!c,children:"Publish"})})]})}),_=(a(21),function(e){var t=e.altText,a=e.extraClassNamesSpaceSeparated,n=e.imageURL,r=e.titleText;return Object(D.jsx)("div",{className:"avatar "+(a||""),children:Object(D.jsx)("img",{src:n,alt:t,title:r})})}),L=(a(22),function(e){var t=e.extraClassNamesSpaceSeparated,a=e.children;return Object(D.jsx)("div",{className:"label "+(t||""),children:a})}),U=(a(23),function(e){var t=e.extraClassNamesSpaceSeparated,a=e.children;return Object(D.jsx)("div",{className:"timestamp "+(t||""),children:a})}),B=(a(24),function(e){var t=e.extraClassNamesSpaceSeparated,a=e.children,r=Object(n.useRef)(),c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(n.useState)(!1),b=Object(o.a)(l,2),d=b[0],j=b[1];return Object(n.useEffect)((function(){r.current.clientHeight<r.current.scrollHeight&&u(!0)}),[]),Object(D.jsxs)("div",{className:"bubble "+(t||""),children:[Object(D.jsx)("div",{className:"bubble-tail"}),Object(D.jsxs)("div",{className:"bubble-content"+(d?" bubble-content--visible":""),ref:r,children:[a,i&&Object(D.jsx)("div",{className:"bubble-readmore",onClick:function(){return j((function(e){return!e}))},children:"Read "+(d?"Less":"More")})||null]})]})}),H=(a(25),function(e){var t=e.extraClassNamesSpaceSeparated,a=e.name,r=e.photoUrl,c=e.pubDate,s=e.pubTime,o=e.content,i=e.isTheLastInTheList,u=Object(n.useRef)();return Object(n.useEffect)((function(){i&&u.current.scrollIntoView()})),Object(D.jsxs)("div",{className:"note "+(t||""),children:[Object(D.jsx)(_,{altText:a,extraClassNamesSpaceSeparated:"note-avatar",imageURL:r,titleText:a}),Object(D.jsx)(L,{extraClassNamesSpaceSeparated:"note-label",children:a}),Object(D.jsx)(U,{extraClassNamesSpaceSeparated:"note-timestamp",children:c+" - "+s}),Object(D.jsx)(B,{extraClassNamesSpaceSeparated:"note-bubble",children:o}),Object(D.jsx)("div",{className:"note-scrollref",ref:u})]})}),M=(a(26),function(){var e=Object(n.useReducer)(y,C),t=Object(o.a)(e,2),a=t[0],r=a.orderedNotesIds,c=a.notesById,s=t[1],l=Object(n.useCallback)((function(e){s({type:u,payload:{objNote:e}})}),[s]);return Object(n.useEffect)((function(){(function(e){return w.apply(this,arguments)})("/data.json").then((function(e){s({type:i,payload:{aNotes:e.slice(0)}})})).catch((function(e){return h(e)}))}),[]),Object(D.jsxs)("div",{className:"app",children:[Object(D.jsx)("section",{className:"notes-list",children:r.map((function(e,t){var a=c[e],n="You"===a.name,s=t===r.length-1;return Object(D.jsx)(H,{extraClassNamesSpaceSeparated:n?"note--right":"note--left",name:a.name,photoUrl:a.photoUrl,pubDate:a.pubDate,pubTime:a.pubTime,content:a.content,isTheLastInTheList:s},e)}))}),Object(D.jsx)(R,{addNoteCb:l})]})});((window||{}).history||{}).scrollRestoration&&(window.history.scrollRestoration="manual"),s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(M,{})}),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.c22f6702.chunk.js.map